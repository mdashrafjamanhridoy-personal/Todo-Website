{% extends 'base.html' %} {% load static %} {% block title %}
<title>Todo App</title>
{% endblock %} {% block todoPage %}
<script src="https://cdn.tailwindcss.com"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
  integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<div class="min-h-screen bg-blue-50 flex items-center justify-center">
  <div class="w-full max-w-lg bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-2xl font-bold text-center text-blue-600 mb-6">
      My Todo List
    </h2>

    <!-- Add Todo -->
    <form method="POST" class="flex gap-2 mb-6">
      {% csrf_token %}
      <input
        type="text"
        placeholder="Enter new task"
        class="flex-1 px-4 py-2 border border-blue-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
        name="titles"
      />
      <button
        type="submit"
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
      >
        Add
      </button>
    </form>

    <!-- Todo List -->
    {% for todo in res %}
    <ul class="space-y-3">
      <li
        class="flex items-center justify-between bg-blue-100 px-4 py-2 rounded-lg"
      >
        <div>
          <span class="text-blue-900">{{ forloop.counter }}.</span>
          <span>{{ todo.title }}</span>
        </div>

        <div class="font-semibold flex gap-4">
          <!-- Edit -->
          <a href="{% url 'edit_title' todo.id %}">
            <i
              class="fa-solid fa-pen-to-square text-blue-600 hover:text-blue-800"
            ></i>
          </a>

          <!-- Delete -->
          <form
            action="{% url 'delete_todo' todo.id %}"
            method="POST"
            onsubmit="return confirm('Are you sure you want to delete this todo?');"
          >
            {% csrf_token %}
            <button type="submit">
              <i class="fa-solid fa-trash text-red-500 hover:text-red-700"></i>
            </button>
          </form>
        </div>
      </li>
    </ul>
    {% endfor %}

    <!-- Logout -->
    <div class="text-center mt-6">
      <a
        href="{% url 'logout' %}"
        class="text-blue-600 font-medium hover:underline"
      >
        Logout
      </a>
    </div>
  </div>
</div>
{% endblock %}
